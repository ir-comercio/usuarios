<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Usuários</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <h1 class="splash-title">Gerenciamento de Usuários</h1>
    </div>

    <!-- Conteúdo Principal -->
    <div class="app-content">
        <div class="container">
            <div class="header">
                <h1>Gerenciamento de Usuários</h1>
                <div id="connectionStatus" class="connection-status offline">
                    <span class="status-dot"></span>
                </div>
            </div>

            <div class="button-wrapper">
                <button onclick="toggleForm()" class="register">Novo Usuário</button>
            </div>

            <!-- Dashboard -->
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-label">Total</div>
                    <div class="stat-value" id="statTotal">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ativos</div>
                    <div class="stat-value stat-success" id="statAtivos">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Inativos</div>
                    <div class="stat-value stat-danger" id="statInativos">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Administradores</div>
                    <div class="stat-value stat-warning" id="statAdmins">0</div>
                </div>
            </div>

            <!-- FILTROS -->
            <div class="card">
                <h3>Filtros</h3>
                <div class="filters">
                    <input type="text" id="searchInput" placeholder="Pesquisar por nome ou usuário..." oninput="filterUsers()">
                    
                    <select id="filterStatus" onchange="filterUsers()">
                        <option value="all">Todos os Status</option>
                        <option value="active">Ativos</option>
                        <option value="inactive">Inativos</option>
                    </select>

                    <select id="filterAdmin" onchange="filterUsers()">
                        <option value="all">Todos os Tipos</option>
                        <option value="admin">Administradores</option>
                        <option value="user">Usuários</option>
                    </select>
                </div>
            </div>

            <!-- LISTA DE USUÁRIOS -->
            <div class="card">
                <h3>Usuários Cadastrados</h3>
                <div id="usersContainer"></div>
            </div>
        </div>
    </div>

    <!-- MODAL: FORMULÁRIO DE USUÁRIO -->
    <div id="modalForm" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeForm()">&times;</span>
            <h2 id="formTitle">Novo Usuário</h2>
            <form id="userForm" onsubmit="handleSubmit(event)">
                <div class="form-group">
                    <label for="name">Nome Completo *</label>
                    <input type="text" id="name" required>
                </div>

                <div class="form-group">
                    <label for="username">Nome de Usuário *</label>
                    <input type="text" id="username" required pattern="[a-z0-9_]+" title="Apenas letras minúsculas, números e underscore">
                    <small>Apenas letras minúsculas, números e underscore (_)</small>
                </div>

                <div class="form-group">
                    <label for="password">Senha *</label>
                    <input type="password" id="password" minlength="6">
                    <small id="passwordHint">Mínimo 6 caracteres</small>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="is_admin">
                        Administrador
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="is_active" checked>
                        Ativo
                    </label>
                </div>

                <div class="button-group">
                    <button type="button" onclick="closeForm()">Cancelar</button>
                    <button type="submit" class="submit">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL: VISUALIZAR USUÁRIO -->
    <div id="modalView" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeViewModal()">&times;</span>
            <h2>Detalhes do Usuário</h2>
            <div id="userDetails"></div>
            <div class="button-group">
                <button onclick="closeViewModal()">Fechar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
